{"version":3,"file":"concepts.component.js","sourceRoot":"","sources":["../../src/app/+concepts/concepts.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport {CycconceptService} from '../shared/cycconcept.service';\r\nimport {RouteSegment, Router} from '@angular/router';\r\nimport {Concept} from './concept.model';\r\nimport {Observable} from 'rxjs/Rx'\r\nimport {JustificationService} from '../shared/justification.service';\r\nimport {CycavatarComponent} from '../cycavatar/cycavatar.component';\r\ndeclare var $: any;\r\ndeclare var Spinner: any;\r\n\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'app-concepts',\r\n  templateUrl: 'concepts.component.html',\r\n  styleUrls: ['concepts.component.css'],\r\n  providers: [CycconceptService, JustificationService],\r\n  directives:[CycavatarComponent]\r\n})\r\n\r\n\r\nexport class ConceptsComponent implements OnInit {\r\n  private concepts: any[];\r\n  private availableConcepts:Concept[]\r\n  private selectedInputs: any;\r\n  private editActive: boolean = false;\r\n  private sentenceRationale: boolean = false;\r\n  private editAudienceEnabled: boolean = false;\r\n  private sentenceSelected: boolean = false;\r\n  private allSelectedSentences: any = [];\r\n  private showSentences: boolean = false;\r\n  private rationale: any[];\r\n  private isProofViewOpen:boolean = false;\r\n  private session:string;\r\n  private conceptQueryInProgress: boolean = false;\r\n\r\n  constructor(private _justificationService: JustificationService, private _cycConceptService: CycconceptService, private _router: Router, private _routeParams: RouteSegment) {\r\n    let audience:string = window.localStorage.getItem('audience');\r\n    let product:string = window.localStorage.getItem('product');\r\n    let campaign:string = window.localStorage.getItem('campaign');\r\n    this.selectedInputs = {audience:audience,product:product,campaign:campaign};\r\n  }\r\n  public disableEdit(evt) {\r\n    if (evt.which == 13) {\r\n      this.editAudienceEnabled = false;\r\n      this.conceptQueryInProgress = true;\r\n      window.localStorage.setItem('audience',this.selectedInputs.audience);\r\n      this.fetchConceptsFromCyc();\r\n    }\r\n  }\r\n\r\n// public prepareList() {\r\n//     $('#expList').find('li:has(ul)')\r\n//     .click( function(event) {\r\n//         if (this == event.target) {\r\n//             $(this).toggleClass('expanded');\r\n//             $(this).children('ul').toggle('medium');\r\n//         }\r\n//         return false;\r\n//     })\r\n//     .addClass('collapsed')\r\n//     .children('ul').hide();\r\n\r\n//     //Create the button funtionality\r\n//     $('#expandList')\r\n//     .click( function() {\r\n//         $('.collapsed').addClass('expanded');\r\n//         $('.collapsed').children().show('medium');\r\n//     })\r\n//     $('#collapseList')\r\n//     .click( function() {\r\n//         $('.collapsed').removeClass('expanded');\r\n//         $('.collapsed').children().hide('medium');\r\n//     })\r\n    \r\n// };\r\n\r\n\r\n\r\n  public enableEdit() {\r\n    this.editAudienceEnabled = true;\r\n  }\r\n\r\n  public editSelectedAudience() {\r\n    this.editActive = true;\r\n  }\r\n\r\n  public getRational() {\r\n    return this.rationale;\r\n  }\r\n  public showRationale(concept) {\r\n    var ref = this;\r\n    this.isProofViewOpen = true;\r\n    var elem = document.getElementById('spinner');\r\n    var spinner = new Spinner({ radius: 60, width: 20, length: 80, lines: 15, className: 'loader', color: 'wheat' }).spin(elem);\r\n    this._justificationService\r\n      .fetchJustificationForConcept(concept.index, concept.sessionId)\r\n      .subscribe(data => {\r\n        this.rationale = data.proofs;\r\n        spinner.stop();\r\n        $(\"#proofDialog\").dialog({\r\n          modal: true,\r\n          position: 'center',\r\n          width: 1000,\r\n          height: 500,\r\n          title: \"Rational for \" + concept.name,\r\n          show: {\r\n            effect: \"blind\",\r\n            duration: 1000\r\n          },\r\n          hide: {\r\n            effect: \"explode\",\r\n            duration: 1000\r\n          },\r\n          close: function(event,ui) {\r\n            ref.isProofViewOpen = false; \r\n          }\r\n        });\r\n      });\r\n\r\n    // concept.sentenceRationale = !concept.sentenceRationale;\r\n\r\n  }\r\n\r\n  public hideRationale(concept) {\r\n    concept.sentenceRationale = false;\r\n  }\r\n\r\n  public selectSentence(concept, sentence) {\r\n    this.session = concept.sessionId;\r\n    sentence.sentenceSelected = !sentence.sentenceSelected;\r\n    if (sentence.sentenceSelected == true) {\r\n      concept.selectedSentencesCount++;\r\n      this.allSelectedSentences.push(sentence);\r\n      concept.selected = true;\r\n    }\r\n    else if (sentence.sentenceSelected == false) {\r\n      var index = this.allSelectedSentences.indexOf(sentence);\r\n      this.allSelectedSentences.splice(index, 1);\r\n      concept.selectedSentencesCount--;\r\n    }\r\n  }\r\n\r\n  public toggleSentences(sentenceList) {\r\n    sentenceList.showSentences = !sentenceList.showSentences;\r\n  }\r\n  \r\n  public toggleConcept(concept) {\r\n    concept.sentences.showSentences =!concept.sentences.showSentences;\r\n  }\r\n \r\n  public loadCycQuestions() {\r\n    window.localStorage.setItem('target',JSON.stringify(this.allSelectedSentences));\r\n    window.localStorage.setItem('session',this.session);\r\n    this._router.navigate(['suggestion']);\r\n  }\r\n  private fetchConceptsFromCyc() {\r\n    this.availableConcepts = this.concepts;\r\n    \r\n    this.concepts = this._cycConceptService.loadCycConcepts(this.selectedInputs.audience,this.availableConcepts,this.allSelectedSentences);\r\n  }\r\n  ngOnInit() {\r\n    this.fetchConceptsFromCyc();\r\n  }\r\n\r\n}\r\n"]}