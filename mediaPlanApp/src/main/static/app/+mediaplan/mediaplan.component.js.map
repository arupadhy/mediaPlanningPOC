{"version":3,"file":"mediaplan.component.js","sourceRoot":"","sources":["../../src/app/+mediaplan/mediaplan.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {RouteSegment} from '@angular/router';\r\nimport {MediaplanSummaryComponent} from './+mediaplan-summary';\r\nimport {DomainService} from '../shared/domain.service';\r\nimport {CycavatarComponent} from '../cycavatar/cycavatar.component';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'app-mediaplan',\r\n  templateUrl: 'mediaplan.component.html',\r\n  styleUrls: ['mediaplan.component.css'],\r\n  directives: [MediaplanSummaryComponent,CycavatarComponent],\r\n  providers: [DomainService]\r\n})\r\nexport class MediaplanComponent implements OnInit {\r\n\r\n  planInput: any = {};\r\n  productInput: any = {};\r\n  audienceInput: any = {};\r\n  mediaPlan: any = {};\r\n  businessObjectiveInput: any = {};\r\n  kpiToMeasureInput: any = {};\r\n  showAddedInput: boolean = false;\r\n  showUserInputs: boolean = false;\r\n  client: string;\r\n\r\n  constructor(private _router: Router, private _routeSegment: RouteSegment, private _domainService: DomainService) {\r\n    this.client = this._routeSegment.getParam('target');\r\n    this.mediaPlan.pageOne = true;\r\n    this.mediaPlan.nextPage = false;\r\n    this.planInput.planName = '';\r\n    this.productInput.productName = '';\r\n    this.mediaPlan.pageTwo = false;\r\n    this.audienceInput.name = '';\r\n    this.businessObjectiveInput.name = '';\r\n    this.kpiToMeasureInput.name = '';\r\n  }\r\n\r\n  public loadCycConcepts() {\r\n    let selectedInputs: any = { 'client': this.client, 'audience': this.audienceInput.name.replace(/,\\s*$/, \"\"), 'product': this.productInput.productName, 'campaign': this.planInput.planName }\r\n    this._router.navigate(['concepts', { target: selectedInputs }]);\r\n  }\r\n\r\n  public enablePageOneInput() {\r\n    var ref = this;\r\n    $(\"#planNameInput\").autocomplete({\r\n      source: [\"ForeEver Faster\", \"Whereâ€™s the Beef?\", \"We Try Harder\", \"ForeEver Lasting\", \" ForEver Name\", \"Just Do It\"]\r\n    });\r\n\r\n    $(\"#productNameInput\").autocomplete({\r\n      source: ref._domainService.getProducts(),\r\n      minLength: 1\r\n    });\r\n    if (this.planInput.planName.length > 0 && this.productInput.productName.length > 0) {\r\n      this.mediaPlan.nextPage = true;\r\n    }\r\n    else {\r\n      this.mediaPlan.nextPage = false;\r\n    }\r\n\r\n  }\r\n\r\n  public submitPageOneInput() {\r\n    this.mediaPlan.pageOne = false;\r\n    this.mediaPlan.pageTwo = true;\r\n    this.mediaPlan.nextPage = false;\r\n    this.planInput.planName = $(\"#planNameInput\").val();\r\n    this.productInput.productName = $(\"#productNameInput\").val();\r\n  }\r\n\r\n  public split(val) {\r\n    return val.split(/,\\s*/);\r\n  }\r\n  public extractLast(term) {\r\n    return this.split(term).pop();\r\n  }\r\n\r\n  public enablePageTwoInput() {\r\n    var ref = this;\r\n    $(\"#audienceNameInput\").autocomplete({\r\n      minLength: 0,\r\n      source: function (request, response) {\r\n        // delegate back to autocomplete, but extract the last term\r\n        response($.ui.autocomplete.filter(ref._domainService.getStrategicAudience()\r\n          , ref.extractLast(request.term)));\r\n      },\r\n      focus: function () {\r\n        // prevent value inserted on focus\r\n        return false;\r\n      },\r\n      select: function (event, ui) {\r\n        var terms = ref.split(this.value);\r\n        // remove the current input\r\n        terms.pop();\r\n        // add the selected item\r\n        terms.push(ui.item.value);\r\n        // add placeholder to get the comma-and-space at the end\r\n        terms.push(\"\");\r\n        this.value = terms.join(\", \");\r\n        return false;\r\n      }\r\n    });\r\n\r\n    $('#businessObjectiveInput').autocomplete({\r\n      minLength: 0,\r\n      source: function (request, response) {\r\n        // delegate back to autocomplete, but extract the last term\r\n        response($.ui.autocomplete.filter(\r\n          ref._domainService.getBusinessObjectives(), ref.extractLast(request.term)));\r\n      },\r\n      focus: function () {\r\n        // prevent value inserted on focus\r\n        return false;\r\n      },\r\n      select: function (event, ui) {\r\n        var terms = ref.split(this.value);\r\n        // remove the current input\r\n        terms.pop();\r\n        // add the selected item\r\n        terms.push(ui.item.value);\r\n        // add placeholder to get the comma-and-space at the end\r\n        terms.push(\"\");\r\n        this.value = terms.join(\", \");\r\n        return false;\r\n      }\r\n    });\r\n\r\n    $('#kpiNameInput').autocomplete({\r\n      minLength: 0,\r\n      source: function (request, response) {\r\n        // delegate back to autocomplete, but extract the last term\r\n        response($.ui.autocomplete.filter(\r\n          ref._domainService.getKPIS(), ref.extractLast(request.term)));\r\n      },\r\n      focus: function () {\r\n        // prevent value inserted on focus\r\n        return false;\r\n      },\r\n      select: function (event, ui) {\r\n        var terms = ref.split(this.value);\r\n        // remove the current input\r\n        terms.pop();\r\n        // add the selected item\r\n        terms.push(ui.item.value);\r\n        // add placeholder to get the comma-and-space at the end\r\n        terms.push(\"\");\r\n        this.value = terms.join(\", \");\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (this.audienceInput.name.length > 0 && this.businessObjectiveInput.name.length > 0 && this.kpiToMeasureInput.name.length > 0) {\r\n      this.mediaPlan.nextPage = true;\r\n    }\r\n    else {\r\n      this.mediaPlan.nextPage = false;\r\n    }\r\n  }\r\n\r\n  public getCycConcepts() {\r\n    this.mediaPlan.pageTwo = false;\r\n    this.mediaPlan.nextPage = false;\r\n\r\n    this.audienceInput.name = $(\"#audienceNameInput\").val();\r\n    this.businessObjectiveInput.name = $('#businessObjectiveInput').val();\r\n    this.kpiToMeasureInput.name = $('#kpiNameInput').val();\r\n    this.loadCycConcepts();\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n}\r\n"]}