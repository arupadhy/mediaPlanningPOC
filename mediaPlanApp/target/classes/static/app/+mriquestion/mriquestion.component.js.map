{"version":3,"file":"mriquestion.component.js","sourceRoot":"","sources":["../../src/app/+mriquestion/mriquestion.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport {RouteSegment, Router} from '@angular/router';\r\nimport {CycquestionService} from '../shared/cycquestion.service';\r\nimport {JustificationService} from '../shared/justification.service';\r\nimport {Question} from '../+suggestion/question.model';\r\ndeclare var $: any;\r\ndeclare var Spinner:any;\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'app-mriquestion',\r\n  templateUrl: 'mriquestion.component.html',\r\n  styleUrls: ['mriquestion.component.css'],\r\n  providers: [CycquestionService,JustificationService]\r\n})\r\nexport class MriquestionComponent implements OnInit {\r\n\r\n  private selectedInputs: any;\r\n  private questions: Question[];\r\n  private editAudienceEnabled: boolean = false;\r\n  private selectedQuestions: Question[] = [];\r\n  private rationale:any;\r\n  private sessionId:string;\r\n  private isProofViewOpen:boolean;\r\n\r\n\r\n\r\n  constructor(private _justification:JustificationService,private _router: Router, private _routeSeg: RouteSegment, private _cycQuestiontService: CycquestionService) {\r\n    this.selectedInputs = this._routeSeg.getParam('selectedInputs');\r\n    this.sessionId = this._routeSeg.getParam('session');\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.questions = this._cycQuestiontService.loadQuestionsFromCyc(this._routeSeg.getParam('target'),this.sessionId);\r\n  }\r\n\r\n  public selectQuestion(q: any) {\r\n    this.selectedQuestions.push(q);\r\n    q.selected = !q.selected;\r\n  }\r\n  public selectAnswer(answer: any) {\r\n    answer.recommended = !answer.recommended;\r\n  }\r\n\r\n  public loadQuerypage() {\r\n    this._router.navigate(['suggestion', { 'target': this.selectedQuestions,'selectedInputs':this.selectedInputs,'sessionId':this.sessionId }])\r\n  }\r\n\r\n  public editTargetAudience(evt) {\r\n    if (evt.which == 13) {\r\n      this.editAudienceEnabled = false;\r\n      this._router.navigate(['concepts', { target: this.selectedInputs }]);\r\n    }\r\n  }\r\n\r\n  //  public loadCycConcepts() {\r\n  //     let selectedInputs:any = {'client':this.client,'audience':this.audienceInput.name.replace(/,\\s*$/, \"\"),'product':this.productInput.productName,'campaign':this.planInput.planName}\r\n  //     this._router.navigate(['concepts',{target:selectedInputs}]);\r\n  //   }\r\n\r\n  public showRationale(question) {\r\n    console.log(question);\r\n      this.isProofViewOpen = true;\r\n    var elem = document.getElementById('spinner');\r\n    var spinner = new Spinner({ radius: 60, width: 20, length: 80, lines: 15, className: 'loader', color: 'wheat' }).spin(elem);\r\n    var ref = this;\r\n   this._justification.fetchJustificationForConcept(question.index,this.sessionId)\r\n                      .subscribe(data =>\r\n                        // data => {\r\n                        //   this.rationale = data;\r\n                        //   $('#proofQuestionId').dialog();\r\n                        // }\r\n                        {\r\n        this.rationale = data.proofs;\r\n        spinner.stop();\r\n        console.log(this.rationale);\r\n        console.log(\"open the dialog\");\r\n        $(\"#proofQuestionId\").dialog({\r\n          modal: true,\r\n          position: 'center',\r\n          width: 1000,\r\n          height: 500,\r\n          title: \"Rational for :\" + question.nl,\r\n          show: {\r\n            effect: \"blind\",\r\n            duration: 1000\r\n          },\r\n          hide: {\r\n            effect: \"explode\",\r\n            duration: 1000\r\n          },\r\n          close: function(event,ui) {\r\n            ref.isProofViewOpen = false; \r\n          }\r\n        });\r\n      }\r\n                      )\r\n    \r\n  }\r\n\r\n  public enableEdit() {\r\n    var ref = this;\r\n    $(\"#alertDialog\").dialog({\r\n      resizable: false,\r\n      minHeight: 140,\r\n      minWidth: 450,\r\n      title: \"ALERT\",\r\n      modal: true,\r\n      show: {\r\n        effect: \"blind\",\r\n        duration: 1000\r\n      },\r\n      hide: {\r\n        effect: \"explode\",\r\n        duration: 1000\r\n      },\r\n      buttons: {\r\n        \"Yes\": function () {\r\n          ref.editAudienceEnabled = true;\r\n          $(this).dialog(\"close\");\r\n        },\r\n        \"No\": function () {\r\n          $(this).dialog(\"close\");\r\n        }\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n}\r\n"]}